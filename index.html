<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TITUS'S DOXXING TOOL</title>
  <!-- iOS Web App Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Doxxer">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="apple-touch-icon" href="icon.png">

  <style>
    :root {
      --primary-color: #00ff00;
      --secondary-color: #00aa00;
      --tertiary-color: #ff0000;
      --accent-color: #00ffff;
      --bg-dark: #000000;
      --bg-darker: #111111;
      --bg-light: #1a1a1a;
      --text-primary: #00ff00;
      --text-secondary: #666666;
      --border-color: #333333;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Courier New', Courier, monospace;
      background: var(--bg-dark);
      color: var(--text-primary);
      padding: 0.75rem;
      max-width: 900px;
      margin: 0 auto;
      line-height: 1.4;
      min-height: 100vh;
      font-size: 14px;
      letter-spacing: 0.02em;
    }

    @media (min-width: 768px) {
      body {
        padding: 2rem;
      }
    }

    input, textarea, select, button {
      width: 100%;
      margin: 8px 0 16px 0;
      background: var(--bg-darker);
      border: 2px solid var(--border-color);
      color: var(--text-primary);
      padding: 0.75rem;
      font-family: inherit;
      font-size: 0.9rem;
      border-radius: 0;
      transition: all 0.2s ease;
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    }
    label {
      margin-top: 1rem;
      display: block;
      font-weight: 600;
      color: var(--text-primary);
      font-size: 0.9rem;
    }

    .section {
      margin-bottom: 1.5rem;
      border: 2px solid var(--border-color);
      padding: 1rem;
      border-radius: 0;
      background: var(--bg-darker);
    }

    @media (min-width: 768px) {
      .section {
        margin-bottom: 2rem;
        padding: 1.5rem;
      }
    }

    h1 {
      text-align: center;
      margin: 0 0 2rem 0;
      font-size: 1.75rem;
      font-weight: 700;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    
    }

    @media (min-width: 768px) {
      h1 {
        font-size: 2.5rem;
        margin-bottom: 3rem;
      }
    }
    .ascii-box {
      white-space: pre-wrap;
      background: var(--bg-dark);
      padding: 1.5rem;
      border: 2px solid var(--primary-color);
      margin-top: 2rem;
      max-height: 350px;
      overflow-y: auto;
      font-size: 0.85rem;
      border-radius: 0;
      font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
      box-shadow: 0 0 10px rgba(0, 255, 0, 0.2);
    }

    .relative-field, .portfolio-field {
      border: 1px solid var(--border-color);
      padding: 1rem;
      margin: 0.75rem 0;
      position: relative;
      border-radius: 8px;
      background: var(--bg-light);
    }

    .expand-btn {
      background: none;
      border: none;
      color: var(--primary-color);
      cursor: pointer;
      padding: 0;
      font-size: 14px;
      width: auto;
      margin: 0;
      outline: none;
      transition: all 0.2s ease;
    }
    .expand-btn:hover {
      color: var(--accent-color);
      transform: scale(1.1);
    }
    .expand-btn.collapsed {
      transform: rotate(-90deg);
    }

    .remove-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: var(--bg-darker);
      border: 1px solid var(--tertiary-color);
      color: var(--tertiary-color);
      cursor: pointer;
      padding: 6px 10px;
      font-size: 0.8rem;
      user-select: none;
      border-radius: 6px;
      transition: all 0.2s ease;
      width: auto;
      margin: 0;
      line-height: 1;
    }
    .remove-btn:hover {
      background: var(--tertiary-color);
      color: var(--bg-dark);
      transform: translateY(-1px);
    }

    .add-btn {
      background: var(--bg-darker);
      border: 1px solid var(--primary-color);
      color: var(--primary-color);
      cursor: pointer;
      padding: 0.875rem 1.25rem;
      font-size: 0.9rem;
      margin-top: 16px;
      user-select: none;
      border-radius: 8px;
      transition: all 0.2s ease;
      font-weight: 600;
    }
    .add-btn:hover {
      background: var(--primary-color);
      color: var(--bg-dark);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 212, 170, 0.3);
    }

    .edit-btn {
      background: var(--bg-darker);
      border: 1px solid var(--secondary-color);
      color: var(--secondary-color);
      cursor: pointer;
      padding: 6px 10px;
      font-size: 0.8rem;
      user-select: none;
      border-radius: 6px;
      transition: all 0.2s ease;
      width: auto;
      margin: 0;
    }
    .edit-btn:hover {
      background: var(--secondary-color);
      color: var(--bg-dark);
    }
    .button-container {
      display: flex;
      gap: 4px;
      float: right;
      margin-left: 8px;
    }
    .button-container .remove-btn,
    .button-container .edit-btn {
      position: static;
      margin: 0;
      padding: 2px 6px;
      font-size: 0.75rem;
      min-width: auto;
      width: auto;
    }
  </style>
</head>
<body>
  <div class="settings-container" style="position: fixed; top: 1rem; right: 1rem; z-index: 100;">
    <button onclick="openSettings()" style="background: var(--bg-darker); border: 1px solid var(--primary-color); color: var(--primary-color); padding: 8px; border-radius: 50%; cursor: pointer; font-size: 16px; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);">‚öôÔ∏è</button>
  </div>

  <style>
    .settings-container button:hover {
      background: var(--primary-color) !important;
      color: var(--bg-dark) !important;
      transform: rotate(90deg) scale(1.05);
    }

    @media (min-width: 768px) {
      .settings-container {
        top: 2rem !important;
        right: 2rem !important;
      }
      .settings-container button {
        width: 48px !important;
        height: 48px !important;
        font-size: 18px !important;
      }
    }
  </style>

  <div id="settingsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.75); z-index: 1000; backdrop-filter: blur(4px);">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--bg-darker); border: 1px solid var(--border-color); padding: 2rem; border-radius: 12px; width: 90%; max-width: 400px; max-height: 90%; overflow-y: auto; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);">
      <h3 style="margin-top: 0; color: var(--primary-color); font-size: 1.25rem; font-weight: 600;">Theme Settings</h3>
      <label>Primary Color</label>
      <input type="color" id="primaryColor" value="#64748b" onchange="updateColors()" style="width: 100%; height: 44px; border-radius: 8px;">
      <label>Secondary Color</label>
      <input type="color" id="secondaryColor" value="#475569" onchange="updateColors()" style="width: 100%; height: 44px; border-radius: 8px;">
      <label>Tertiary Color</label>
      <input type="color" id="tertiaryColor" value="#dc2626" onchange="updateColors()" style="width: 100%; height: 44px; border-radius: 8px;">
      <button onclick="closeSettings()" style="margin-top: 20px; background: var(--bg-light); border: 1px solid var(--primary-color); color: var(--primary-color); padding: 12px 20px; border-radius: 8px; cursor: pointer; transition: all 0.2s ease; font-weight: 600;">Close</button>
    </div>
  </div>
  
  <pre style="
    text-align: center;
    margin: auto 2rem -20px;
    font-size: 0.6rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-family: monospace;
    line-height: 1;
    transform: translateX(-20px); /* <- This nudges it 10px left */
  ">
    
    
       _______  ___  _______  __   __  _______ 
      |       ||   ||       ||  | |  ||       |
      |_     _||   ||_     _||  | |  ||  _____|
        |   |  |   |  |   |  |  |_|  || |_____ 
        |   |  |   |  |   |  |       ||_____  |
        |   |  |   |  |   |  |       | _____| |
        |___|  |___|_______  |_______||_______|
      |      | |       ||  |_|  ||  |_|  |     
      |  _    ||   _   ||       ||       |     
      | | |   ||  | |  ||       ||       |     
      | |_|   ||  |_|  | |     |  |     |      
      |       ||       ||   _   ||   _   |     
      |______| |_______||__| |__||__| |__|  
       Created by @levifrsn63






  </pre>


  <div style="margin-bottom: 1.5rem; padding-left: 0;">
    <button id="toggleAllBtn" onclick="toggleAllSections()" style="background: var(--bg-light); border: 1px solid var(--border-color); color: var(--text-secondary); padding: 8px 16px; font-size: 0.85rem; cursor: pointer; font-family: inherit; outline: none; border-radius: 6px; transition: all 0.2s ease; font-weight: 500;">üìÅ Collapse All</button>
  </div>

  <div class="section">
    <div onclick="toggleSection('reason')" style="cursor: pointer; display: flex; align-items: center; gap: 12px; margin-bottom: 16px; padding: 12px 16px; background: var(--bg-light); border: 1px solid var(--border-color); border-radius: 8px; transition: all 0.2s ease;">
      <button class="expand-btn" id="reasonArrow" style="pointer-events: none;">‚ñº</button>
      <label style="margin: 0; cursor: pointer; font-weight: 600; color: var(--text-primary);">Reason</label>
    </div>
    <div id="reasonSection">
      <label>Reason of Dox</label>
      <textarea id="reasonOfDox" placeholder="Enter the reason for this dox..." rows="4" style="resize: vertical;"></textarea>
    </div>
  </div>

  <div class="section">
    <div onclick="toggleSection('personal')" style="cursor: pointer; display: flex; align-items: center; gap: 12px; margin-bottom: 16px; padding: 12px 16px; background: var(--bg-light); border: 1px solid var(--border-color); border-radius: 8px; transition: all 0.2s ease;">
      <button class="expand-btn" id="personalArrow" style="pointer-events: none;">‚ñº</button>
      <label style="margin: 0; cursor: pointer; font-weight: 600; color: var(--text-primary);">Personal Information</label>
    </div>
    <div id="personalSection">
      <div id="personalFields"></div>
      <button class="add-btn" onclick="addPersonalField()">‚ûï Add Personal Field</button>
    </div>
  </div>

  <div class="section">
    <div onclick="toggleSection('relatives')" style="cursor: pointer; display: flex; align-items: center; gap: 12px; margin-bottom: 16px; padding: 12px 16px; background: var(--bg-light); border: 1px solid var(--border-color); border-radius: 8px; transition: all 0.2s ease;">
      <button class="expand-btn" id="relativesArrow" style="pointer-events: none;">‚ñº</button>
      <label style="margin: 0; cursor: pointer; font-weight: 600; color: var(--text-primary);">Relatives</label>
    </div>
    <div id="relativesSection">
      <select id="relativeCount" onchange="renderRelatives()">
        <option value="0">None</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
      <div id="relatives"></div>
    </div>
  </div>

  <div class="section">
    <div onclick="toggleSection('portfolio')" style="cursor: pointer; display: flex; align-items: center; gap: 12px; margin-bottom: 16px; padding: 12px 16px; background: var(--bg-light); border: 1px solid var(--border-color); border-radius: 8px; transition: all 0.2s ease;">
      <button class="expand-btn" id="portfolioArrow" style="pointer-events: none;">‚ñº</button>
      <label style="margin: 0; cursor: pointer; font-weight: 600; color: var(--text-primary);">Portfolio</label>
    </div>
    <div id="portfolioSection">
      <div id="portfolioFields"></div>
      <button class="add-btn" onclick="addPortfolioField()">‚ûï Add New Field</button>
    </div>
  </div>

  <div class="section">
    <div onclick="toggleSection('ascii')" style="cursor: pointer; display: flex; align-items: center; gap: 12px; margin-bottom: 16px; padding: 12px 16px; background: var(--bg-light); border: 1px solid var(--border-color); border-radius: 8px; transition: all 0.2s ease;">
      <button class="expand-btn" id="asciiArrow" style="pointer-events: none;">‚ñº</button>
      <label style="margin: 0; cursor: pointer; font-weight: 600; color: var(--text-primary);">ASCII Art Settings</label>
    </div>
    <div id="asciiSection">
      <label>ASCII Art Header (optional)</label>
      <textarea id="asciiHeader" placeholder="Paste ASCII art for header here..." rows="6" style="font-family: monospace; white-space: pre; overflow-wrap: normal;"></textarea>

      <label>ASCII Art Footer (optional)</label>
      <textarea id="asciiFooter" placeholder="Paste ASCII art for footer here..." rows="6" style="font-family: monospace; white-space: pre; overflow-wrap: normal;"></textarea>

      <label>ASCII Art Separator (optional)</label>
      <textarea id="asciiSeparator" placeholder="Paste ASCII art to use between sections..." rows="4" style="font-family: monospace; white-space: pre; overflow-wrap: normal;"></textarea>
    </div>
  </div>

  <div class="main-buttons" style="display: flex; flex-direction: column; gap: 12px; margin-top: 3rem; padding: 0;">
    <button onclick="generateTXT()" style="background: var(--primary-color); border: 1px solid var(--primary-color); color: var(--bg-dark); padding: 16px 20px; font-size: 1rem; border-radius: 8px; cursor: pointer; font-family: inherit; width: 100%; font-weight: 600; transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0, 212, 170, 0.2);">‚ú® Generate Text</button>
    <button onclick="copyToClipboard()" style="background: var(--bg-darker); border: 1px solid var(--secondary-color); color: var(--secondary-color); padding: 14px 20px; font-size: 0.95rem; border-radius: 8px; cursor: pointer; font-family: inherit; width: 100%; font-weight: 500; transition: all 0.2s ease;">üìã Copy to Clipboard</button>
    <button onclick="redirectToDoxbin()" style="background: var(--bg-darker); border: 1px solid var(--tertiary-color); color: var(--tertiary-color); padding: 14px 20px; font-size: 0.95rem; border-radius: 8px; cursor: pointer; font-family: inherit; width: 100%; font-weight: 500; transition: all 0.2s ease;">üåê Open Doxbin.net</button>
    <button onclick="redirectToASCII()" style="background: var(--bg-darker); border: 1px solid var(--accent-color); color: var(--accent-color); padding: 14px 20px; font-size: 0.95rem; border-radius: 8px; cursor: pointer; font-family: inherit; width: 100%; font-weight: 500; transition: all 0.2s ease;">üé® ASCII Generator</button>
  </div>

  <style>
    .main-buttons button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .main-buttons button:first-child:hover {
      background: var(--accent-color);
      border-color: var(--accent-color);
      box-shadow: 0 4px 16px rgba(255, 217, 61, 0.3);
    }

    @media (min-width: 768px) {
      .main-buttons {
        flex-direction: row !important;
        justify-content: center;
        gap: 16px !important;
      }
      .main-buttons button {
        width: auto !important;
        padding: 16px 32px !important;
        font-size: 1rem !important;
      }
    }
  </style>

  <div class="ascii-box" id="previewBox" style="display:none;"></div>

  <div style="text-align: center; margin-top: 3rem; padding: 2rem 0 1rem 0; border-top: 1px solid var(--border-color); color: var(--text-secondary); font-size: 0.9rem;">
    <p style="margin: 0;">Created by <a href="https://github.com/levifrsn63" target="_blank" style="color: var(--primary-color); text-decoration: underline; font-weight: 500; transition: color 0.2s ease;">@levifrsn63</a></p>
  </div>

<script>
  // Render relatives based on count
  function renderRelatives() {
    const container = document.getElementById('relatives');
    container.innerHTML = '';
    const count = parseInt(document.getElementById('relativeCount').value);

    for (let i = 0; i < count; i++) {
      const div = document.createElement('div');
      div.className = 'relative-field';
      div.innerHTML = `
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; padding: 8px; background: #333; border: 1px solid #0f0; border-radius: 3px;">
          <span style="color: #0f0; font-weight: bold;">Relative ${i + 1}</span>
          <div class="button-container">
            <button class="edit-btn" onclick="editRelative(${i})" title="Edit relative">‚úèÔ∏è</button>
            <button class="remove-btn" onclick="removeRelative(${i})" title="Delete this relative">üóë</button>
          </div>
        </div>
        <label>Name</label><input type="text" id="rel_name_${i}" />
        <label>Known As</label><input type="text" id="rel_known_${i}" />
        <label>Age</label><input type="text" id="rel_age_${i}" />
        <label>Occupation</label><input type="text" id="rel_occ_${i}" />
        <label>Phone Number</label><input type="text" id="rel_phone_${i}" />
        <label>Address</label><input type="text" id="rel_address_${i}" />
      `;
      container.appendChild(div);
    }
  }

  // Remove relative by index, adjust select count, re-render
  function removeRelative(index) {
    let count = parseInt(document.getElementById('relativeCount').value);
    if (count <= 0) return;
    count--;
    document.getElementById('relativeCount').value = count;
    // We have to remove data in a smart way, easiest: re-render with count-1
    renderRelatives();
  }

  // Personal fields container
  const personalContainer = document.getElementById('personalFields');

  // Initial default personal fields
  const defaultPersonalFields = [
    {label: 'Full Name', value: '', editing: false},
    {label: 'Known As/Aliases', value: '', editing: false},
    {label: 'Phone Number', value: '', editing: false},
    {label: 'Address', value: '', editing: false},
    {label: 'Date of Birth', value: '', editing: false},
    {label: 'Age', value: '', editing: false},
    {label: 'IP Address', value: '', editing: false},
    {label: 'Email Address', value: '', editing: false},
    {label: 'Social Security Number', value: '', editing: false},
    {label: 'Occupation', value: '', editing: false},
    {label: 'Employer', value: '', editing: false},
    {label: 'School/University', value: '', editing: false},
    {label: 'Selfie Link', value: '', editing: false},
  ];

  // Store personal fields as array of objects {label, value, editing}
  let personalFieldsData = [...defaultPersonalFields];

  // Portfolio fields container
  const portfolioContainer = document.getElementById('portfolioFields');

  // Initial default portfolio fields
  const defaultPortfolioFields = [
    {label: 'Website', value: 'https://example.com', editing: false},
    {label: 'GitHub', value: 'https://github.com/example', editing: false},
    {label: 'Resume', value: 'resume.pdf', editing: false},
  ];

  // Store portfolio fields as array of objects {label, value}
  let portfolioFieldsData = [...defaultPortfolioFields];

  function renderPersonalFields() {
    personalContainer.innerHTML = '';
    personalFieldsData.forEach((field, i) => {
      const div = document.createElement('div');
      div.className = 'portfolio-field';
      div.innerHTML = `
        <div style="background: var(--bg-dark); padding: 8px; border: 2px solid var(--primary-color); color: var(--primary-color); font-family: monospace; border-radius: 0; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 0 5px rgba(255, 255, 255, 0.2);">
          <div style="display: flex; align-items: center; gap: 8px;">
            <span>${field.label || 'Untitled Field'}</span>
          </div>
          <div class="button-container">
            <button class="edit-btn" onclick="togglePersonalLabelEdit(${i})" title="${field.editing ? 'Save label' : 'Edit label'}">${field.editing ? 'üíæ' : '‚úèÔ∏è'}</button>
            <button class="remove-btn" onclick="removePersonalField(${i})" title="Delete this field">üóë</button>
          </div>
        </div>
        <div class="field-content">
          <div id="personal-label-edit-${i}" style="display: ${field.editing ? 'block' : 'none'};">
            <label>Field Label</label>
            <input type="text" class="personal-label" data-index="${i}" value="${field.label}" oninput="updatePersonalFieldLabel(${i}, this.value)" style="margin-bottom: 16px;" />
          </div>
          <label>Field Value</label>
          <div style="display: flex; gap: 8px; align-items: center;">
            <input type="text" class="personal-value" data-index="${i}" value="${field.value}" oninput="updatePersonalFieldValue(${i}, this.value)" style="flex: 1;" />
            <button onclick="pasteFromClipboard(${i})" style="background: #333333; border: 1px solid #666666; color: #666666; padding: 8px; font-size: 0.9rem; border-radius: 4px; cursor: pointer; font-family: inherit; font-weight: 500; transition: all 0.2s ease; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;">üìã</button>
          </div>
        </div>
      `;
      personalContainer.appendChild(div);
    });
  }

    function renderLinkFields() {
    personalContainer.innerHTML = '';
    personalFieldsData.forEach((field, i) => {
      const div = document.createElement('div');
      div.className = 'portfolio-field';
      div.innerHTML = `
        <div style="background: var(--bg-dark); padding: 8px; border: 2px solid var(--primary-color); color: var(--primary-color); font-family: monospace; border-radius: 0; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 0 5px rgba(255, 255, 255, 0.2);">
          <div style="display: flex; align-items: center; gap: 8px;">
            <span>${field.label || 'Untitled Field'}</span>
          </div>
          <div class="button-container">
            <button class="edit-btn" onclick="togglePersonalLabelEdit(${i})" title="${field.editing ? 'Save label' : 'Edit label'}">${field.editing ? 'üíæ' : '‚úèÔ∏è'}</button>
            <button class="remove-btn" onclick="removePersonalField(${i})" title="Delete this field">üóë</button>
          </div>
        </div>
        <div class="field-content">
          <div id="personal-label-edit-${i}" style="display: ${field.editing ? 'block' : 'none'};">
            <label>Field Label</label>
            <input type="text" class="personal-label" data-index="${i}" value="${field.label}" oninput="updatePersonalFieldLabel(${i}, this.value)" style="margin-bottom: 16px;" />
          </div>
          <label>Field Value</label>
          <div style="display: flex; gap: 8px; align-items: center;">
            <input type="text" class="personal-value" data-index="${i}" value="${field.value}" oninput="updatePersonalFieldValue(${i}, this.value)" style="flex: 1;" />
            <button onclick="pasteFromClipboard(${i})" style="background: #333333; border: 1px solid #666666; color: #666666; padding: 8px; font-size: 0.9rem; border-radius: 4px; cursor: pointer; font-family: inherit; font-weight: 500; transition: all 0.2s ease; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;">üìã</button>
          </div>
        </div>
      `;
      personalContainer.appendChild(div);
    });
  }

   function pasteFromClipboard(index) {
        navigator.clipboard.readText().then(text => {
            updatePersonalFieldValue(index, text);
            // Update the input field directly without re-rendering
            const input = document.querySelector(`input.personal-value[data-index="${index}"]`);
            if (input) {
                input.value = text;
            }
        }).catch(err => {
            console.error('Failed to read clipboard contents: ', err);
        });
    }

  function addPersonalField() {
    personalFieldsData.push({label: '', value: '', editing: false});
    renderPersonalFields();
  }

   function addLinkField() {
    personalFieldsData.push({label: '', value: '', editing: false});
    renderLinkFields();
  }

  function removePersonalField(index) {
    personalFieldsData.splice(index, 1);
    renderPersonalFields();
  }

  function togglePersonalLabelEdit(index) {
    personalFieldsData[index].editing = !personalFieldsData[index].editing;
    renderPersonalFields();
  }

  function updatePersonalFieldLabel(index, newLabel) {
    personalFieldsData[index].label = newLabel;
  }

  function updatePersonalFieldValue(index, newValue) {
    personalFieldsData[index].value = newValue;
  }

  function editRelative(index) {
    // For now, just focus on the first input of this relative
    document.getElementById(`rel_name_${index}`)?.focus();
  }

  function renderPortfolioFields() {
    portfolioContainer.innerHTML = '';
    portfolioFieldsData.forEach((field, i) => {
      const div = document.createElement('div');
      div.className = 'portfolio-field';
      div.innerHTML = `
        <div style="background: var(--bg-dark); padding: 8px; border: 2px solid var(--primary-color); color: var(--primary-color); font-family: monospace; border-radius: 0; margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 0 5px rgba(255, 255, 255, 0.2);">
          <div style="display: flex; align-items: center; gap: 8px;">
            <span>${field.label || 'Untitled Field'}</span>
          </div>
          <div class="button-container">
            <button class="edit-btn" onclick="toggleLabelEdit(${i})" title="${field.editing ? 'Save label' : 'Edit label'}">${field.editing ? 'üíæ' : '‚úèÔ∏è'}</button>
            <button class="remove-btn" onclick="removePortfolioField(${i})" title="Delete this field">üóë</button>
          </div>
        </div>
        <div class="field-content">
          <div id="label-edit-${i}" style="display: ${field.editing ? 'block' : 'none'};">
            <label>Field Label</label>
            <input type="text" class="portfolio-label" data-index="${i}" value="${field.label}" oninput="updatePortfolioFieldLabel(${i}, this.value)" style="margin-bottom: 16px;" />
          </div>
          <label>Field Value</label>
          <input type="text" class="portfolio-value" data-index="${i}" value="${field.value}" oninput="updatePortfolioFieldValue(${i}, this.value)" />
        </div>
      `;
      portfolioContainer.appendChild(div);
    });
  }

  function addPortfolioField() {
    portfolioFieldsData.push({label: '', value: '', editing: false});
    renderPortfolioFields();
  }

  function removePortfolioField(index) {
    portfolioFieldsData.splice(index, 1);
    renderPortfolioFields();
  }

  function toggleLabelEdit(index) {
    portfolioFieldsData[index].editing = !portfolioFieldsData[index].editing;
    renderPortfolioFields();
  }

  function updatePortfolioFieldLabel(index, newLabel) {
    portfolioFieldsData[index].label = newLabel;
  }

  function updatePortfolioFieldValue(index, newValue) {
    portfolioFieldsData[index].value = newValue;
  }

  // Generate the TXT content
  function generateTXT() {
    let content = '';
    const separatorArt = document.getElementById('asciiSeparator').value.trim();

    // Add ASCII art header if provided
    const headerArt = document.getElementById('asciiHeader').value.trim();
    if (headerArt) {
      content += headerArt + '\n\n';
    }

    // Add reason section if provided
    const reasonText = document.getElementById('reasonOfDox').value.trim();
    if (reasonText) {
      content += '‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n';
      content += '‚ïë                              REASON OF DOX                                  ‚ïë\n';
      content += '‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n';
      content += reasonText + '\n\n';

      if (separatorArt) {
        content += separatorArt + '\n\n';
      }
    }

    // Header for Personal Information
    content += '‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n';
    content += '‚ïë                          PERSONAL INFORMATION                               ‚ïë\n';
    content += '‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n';

    // Add personal fields
    personalFieldsData.forEach((field) => {
      if (field.label.trim() !== '' && field.value.trim() !== '') {
        const dots = '.'.repeat(Math.max(1, 20 - field.label.length));
        content += `${field.label} ${dots} ${field.value}\n`;
      }
    });
    content += '\n';

    // Add separator before relatives if both exist
    const relativeCount = parseInt(document.getElementById('relativeCount').value);
    if (relativeCount > 0 && separatorArt) {
      content += separatorArt + '\n\n';
    }

    // Relatives section
    if (relativeCount > 0) {
      content += '‚ïî‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï¶‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n';
      content += '‚ïë‚ñë‚ñë‚ñë‚ïë       RELATIVES       ‚ïë + ‚ïë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ïë ITA ‚ïë\n';
      content += '‚ïö‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï©‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n';

      for (let i = 0; i < relativeCount; i++) {
        content += `Relative ${i + 1}:\n`;
        content += `  Name ............... ${document.getElementById(`rel_name_${i}`)?.value || ''}\n`;
        content += `  Known As ........... ${document.getElementById(`rel_known_${i}`)?.value || ''}\n`;
        content += `  Age ................ ${document.getElementById(`rel_age_${i}`)?.value || ''}\n`;
        content += `  Occupation ......... ${document.getElementById(`rel_occ_${i}`)?.value || ''}\n`;
        content += `  Phone Number ....... ${document.getElementById(`rel_phone_${i}`)?.value || ''}\n`;
        content += `  Address ............ ${document.getElementById(`rel_address_${i}`)?.value || ''}\n\n`;
      }
    }

    // Add separator before portfolio if both exist
    if (portfolioFieldsData.length > 0 && separatorArt) {
      content += separatorArt + '\n\n';
    }

    // Portfolio section
    if (portfolioFieldsData.length > 0) {
      content += '‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n';
      content += '‚ïë      PORTFOLIO        ‚ïë\n';
      content += '‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n';

      portfolioFieldsData.forEach((field) => {
        if (field.label.trim() !== '') {
          content += `${field.label} : ${field.value}\n`;
        }
      });
    }

    // Add ASCII art footer if provided
    const footerArt = document.getElementById('asciiFooter').value.trim();
    if (footerArt) {
      content += '\n' + footerArt;
    }

    // Show output
    const previewBox = document.getElementById('previewBox');
    previewBox.style.display = 'block';
    previewBox.textContent = content;
  }

  // Copy to clipboard function
  function copyToClipboard() {
    const previewBox = document.getElementById('previewBox');
    const content = previewBox.textContent;

    if (!content) {
      alert('Please generate text first!');
      return;
    }

    navigator.clipboard.writeText(content).then(() => {
      // Visual feedback
      const button = event.target;
      const originalText = button.textContent;
      button.textContent = '‚úÖ Copied!';
      button.style.background = '#0f0';
      button.style.color = '#000';

      setTimeout(() => {
        button.textContent = originalText;
        button.style.background = '#333';
        button.style.color = '#00f';
      }, 2000);
    }).catch(() => {
      // Fallback for older browsers
      const textArea = document.createElement('textarea');
      textArea.value = content;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      alert('Text copied to clipboard!');
    });
  }

  // Settings functions
  function openSettings() {
    document.getElementById('settingsModal').style.display = 'block';
  }

  function closeSettings() {
    document.getElementById('settingsModal').style.display = 'none';
  }

  function updateColors() {
    const primary = document.getElementById('primaryColor').value;
    const secondary = document.getElementById('secondaryColor').value;
    const tertiary = document.getElementById('tertiaryColor').value;

    document.documentElement.style.setProperty('--primary-color', primary);
    document.documentElement.style.setProperty('--secondary-color', secondary);
    document.documentElement.style.setProperty('--tertiary-color', tertiary);
  }

  function redirectToDoxbin() {
    window.open('https://doxbin.net', '_blank');
  }

  function redirectToASCII() {
    window.open('https://patorjk.com/software/taag/#p=display&f=Graffiti&t=Type%20Something%20', '_blank');
  }

  // Section collapse state
  const sectionStates = {
    reason: false,
    personal: false,
    relatives: false,
    portfolio: false,
    ascii: false
  };

  function toggleSection(sectionName) {
    sectionStates[sectionName] = !sectionStates[sectionName];
    const section = document.getElementById(sectionName + 'Section');
    const arrow = document.getElementById(sectionName + 'Arrow');

    if (sectionStates[sectionName]) {
      section.style.display = 'none';
      arrow.classList.add('collapsed');
    } else {
      section.style.display = 'block';
      arrow.classList.remove('collapsed');
    }
  }

  // Initial setup - set all sections collapsed
  function initializeSections() {
    Object.keys(sectionStates).forEach(sectionName => {
      sectionStates[sectionName] = true;
      toggleSection(sectionName);
    });
  }

  // Toggle all sections function
  function toggleAllSections() {
    const toggleBtn = document.getElementById('toggleAllBtn');
    const anyExpanded = Object.values(sectionStates).some(state => !state);

    if (anyExpanded) {
      // Collapse all
      Object.keys(sectionStates).forEach(sectionName => {
        if (!sectionStates[sectionName]) {
          toggleSection(sectionName);
        }
      });
      toggleBtn.textContent = 'üìÇ Expand All';
    } else {
      // Expand all
      Object.keys(sectionStates).forEach(sectionName => {
        if (sectionStates[sectionName]) {
          toggleSection(sectionName);
        }
      });
      toggleBtn.textContent = 'üìÅ Collapse All';
    }
  }

  // Initial setup
  renderPersonalFields();
  renderRelatives();
  renderPortfolioFields();
  initializeSections();
</script>
</body>
</html>
